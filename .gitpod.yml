image:
  file: .gitpod/Dockerfile

vscode:
  extensions:
    - betterthantomorrow.calva
    - betterthantomorrow.joyride
    - djblue.portal

ports:
  - port: 5900
    onOpen: ignore
  - port: 6080
    onOpen: ignore
  - port: 6003
    onOpen: ignore
    
tasks:
  # TODO: Figure out why it doesn't work to pre-download the dependencies
  #- name: Download dependencies
  #  init: .gitpod/clojure -Sdeps '{:deps {nrepl/nrepl {:mvn/version,"1.0.0"},cider/cider-nrepl {:mvn/version,"0.28.5"}}}' -P
  - name: The Polylith Real World REPL
    command: clojure -Sdeps '{:deps {nrepl/nrepl {:mvn/version,"1.0.0"},cider/cider-nrepl {:mvn/version,"0.28.5"}}}' -M:dev:test:default -m nrepl.cmdline --middleware "[cider.nrepl/cider-middleware]"
  - name: Getting Started
    command: code development/src/dev/getting_started.clj
